<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data > 

<!--food section  -->


        <record id="food_section_form" model="ir.ui.view">
            <field name="name">food.section.form</field>
            <field name="model">food.expense</field>
            <field name="arch" type="xml">

                <form string="Expenses" class="o_expense_form">
                <header>
                  <button name="action_submit_expenses" string="Create Report" type="object" class="oe_highlight o_expense_submit" attrs="{'invisible': ['|', ('attachment_number', '&lt;=', 0), ('sheet_id', '!=', False)]}"/>
                  <widget name="attach_document" string="Attach Document" action="message_post" attrs="{'invisible': ['|', ('attachment_number', '&lt;', 1), ('id','=',False)]}"/>
                  <widget name="attach_document" string="Attach Document" action="message_post" highlight="1" attrs="{'invisible': ['|',('attachment_number', '&gt;=', 1), ('id','=',False)]}"/>
                  <button name="action_submit_expenses" string="Create Report" type="object" class="o_expense_submit" attrs="{'invisible': ['|', ('attachment_number', '&gt;=', 1), ('sheet_id', '!=', False)]}"/>
                  <field name="state" widget="statusbar" statusbar_visible="draft,reported,approved,done,refused"/>
                  <button name="action_view_sheet" type="object" string="View Report" class="oe_highlight" attrs="{'invisible': [('sheet_id', '=', False)]}"/>
                </header>
                <sheet>
                    <div class="oe_button_box">
                        <button name="action_get_attachment_view"
                            class="oe_stat_button"
                            icon="fa-book"
                            type="object"
                            attrs="{'invisible': [('attachment_number', '=', 0)]}">
                            <field name="attachment_number" widget="statinfo" string="Documents" options="{'reload_on_button': true}"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1>
                            <field name="name" placeholder="e.g. Lunch with Customer"/>
                        </h1>
                       
                    </div>

                    <group>
                        <group>
                            <field name="product_id" context="{'default_can_be_expensed': 1, 'tree_view_ref': 'hr_expense.product_product_expense_tree_view'}"/>
                            <field name="unit_amount" required="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <label for="quantity"/>
                            <div>
                                <field name="quantity" class="oe_inline"/>
                                <!-- <field name="product_uom_id" widget="selection" class="oe_inline" groups="uom.group_uom"/> -->
                            </div>
                            <field name="tax_ids" domain="[('type_tax_use', '=', 'purchase')]" widget="many2many_tags" />
                        </group><group>
                            <field name="reference"/>
                            <field name="date"/>
                            <!-- <field name="account_id" domain="[('internal_type', '=', 'other')]" groups="account.group_account_user"/> -->
                            <field name="employee_id" invisible="1" groups="hr_expense.group_hr_expense_user"/>
                            <field name="sheet_id" invisible="1"/>
                            <field name="currency_id" groups="base.group_multi_currency"/>
                            <field name="analytic_account_id" invisible="1" groups="analytic.group_analytic_accounting"/>
                            <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group><group>
                            <field name="total_amount" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                            <!-- <label for="payment_mode"/>
                            <div>
                                <field name="payment_mode" />
                            </div> -->
                        </group>
                         <group>
                            <field name="meal_type" />
                            <field name="partner_id" />
                            <field name="project_id" groups="hr_expense.group_hr_expense_user"/>
                            <field name="project_manager" invisible="1"/>
                        </group>

                    </group>
                    <div>
                        <field name="description" class="oe_inline" placeholder="Notes..."/>
                    </div>
                </sheet>
                <div class="o_attachment_preview"/>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>

                    

            </field>
        </record>

        <record id="hr_expense_submit_action_server_food" model="ir.actions.server">
            <field name="name">Submit Report</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_food_expense"/>
            <field name="binding_model_id" ref="model_food_expense"/>
            <field name="state">code</field>
            <field name="code">
if records:
    action = records.action_submit_expenses()
            </field>
        </record>

        <!-- <record id="hr_expense_submit_action_server_food_view" model="ir.actions.server">
            <field name="name">View Report</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_food_expense"/>
            <field name="binding_model_id" ref="model_food_expense"/>
            <field name="state">code</field>
            <field name="code">
if records:
    action = records.action_view_sheet()
            </field>
        </record> -->

        <record id="hr_expense_submit_action_server_transportaion" model="ir.actions.server">
            <field name="name">Submit Report</field>
            <field name="type">ir.actions.server</field>
            <field name="model_id" ref="model_transportaion_expense"/>
            <field name="binding_model_id" ref="model_transportaion_expense"/>
            <field name="state">code</field>
            <field name="code">
if records:
    action = records.action_submit_expenses()
            </field>
        </record>

        <record id="food_expense_tree" model="ir.ui.view">
            <field name="name">food.expense.tree</field>
            <field name="model">food.expense</field>
            <field name="arch" type="xml">
                <tree string="Expenses" decoration-bf="message_unread == True" class="o_expense_tree">
                    <field name="currency_id" invisible="True"/>
                    <field name="attachment_number" invisible="True"/>
                    <field name="name"/>
                    <field name="partner_id"/>
                    <field name="date"/>
                    <field name="reference"/>
                    <field name="project_id"/>
                    <field name="meal_type"/>
                    <field name="quantity"/>
                    <field name="total_amount" sum="Total Amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    <field name="state"/>
                    <field name="sheet_id" invisible="not context.get('show_report', False)"/>
                    <!-- <field name="payment_mode"/> -->
                    <field name="analytic_account_id" invisible="1" groups="analytic.group_analytic_accounting"/>
                    <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                    <button name="action_get_attachment_view" string="View Attached Documents" type="object" icon="fa-paperclip" attrs="{'invisible': [('attachment_number', '=', 0)]}"/>
                    <field name="message_unread" invisible="1"/>
                    
                </tree>
            </field>
        </record>
        
         <!--food kanban-->

        <record id="food_expense_kanban_view" model="ir.ui.view">
            <field name="name">food.expense.kanban.view</field>
            <field name="model">food.expense</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="total_amount"/>
                    <field name="date"/>
                    <field name="state"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="row">
                                    <div class="col-12">
                                        <strong class="o_kanban_record_title"><span><t t-esc="record.name.value"/></span></strong>
                                        <strong class="o_kanban_record_subtitle float-right"><span class="text-right"><t t-esc="record.total_amount.value"/></span></strong>
                                    </div>
                                </div>
                                <div class="row mt8">
                                    <div class="col-6 text-muted">
                                        <span><t t-esc="record.employee_id.value"/> <t t-esc="record.date.value"/></span>
                                    </div>
                                    <div class="col-6">
                                        <span class="float-right text-right">
                                            <field name="state" widget="label_selection" options="{'classes': {'draft': 'default', 'reported': 'primary', 'refused': 'danger', 'done': 'warning',
                                            'approved': 'success'}}"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="food_expense_view_pivot" model="ir.ui.view">
            <field name="name">food.expense.view.pivot</field>
            <field name="model">food.expense</field>
            <field name="arch" type="xml">
                <pivot string="Food Expenses Analysis">
                    <!-- <field name="employee_id" type="row"/> -->
                    <field name="date" interval="month" type="col"/>
                    <field name="total_amount" type="measure"/>
                </pivot>
            </field>
        </record>

        <record id="food_expense_view_graph" model="ir.ui.view">
            <field name="name">food.expense.view.graph</field>
            <field name="model">food.expense</field>
            <field name="arch" type="xml">
                <graph string="Food Expenses Analysis">
                    <field name="date" type="col"/>
                    <!-- <field name="employee_id" type="row"/> -->
                    <field name="total_amount" type="measure"/>
                </graph>
            </field>
        </record>

        <!--end food kanban-->
        
        <record id="food_section_menu_action2" model="ir.actions.act_window">
            <field name="name">Food Claims</field>
            <field name="res_model">food.expense</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban,graph,pivot</field>
            <field name="domain">[]</field>
        </record>
        <!-- food section -->
        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ sum="Total Amount" -->


         <!-- food section sheet -->
        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

        <record id="view_food_expense_sheet_tree" model="ir.ui.view">
            <field name="name">food.expense.sheet.tree</field>
            <field name="model">food.expense.sheet</field>
            <field name="arch" type="xml">
                <tree string="Expense Reports" decoration-warning="state=='draft'" decoration-bf="message_unread == True" decoration-danger="state=='cancel'">
                    <field name="name" string="Expense Report"/>
                    <field name="employee_id"/>
                    <field name="create_date"/>
                    <field name="accounting_date" groups="account.group_account_manager"/>
                    <field name="total_amount" sum="Total Amount"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state"/>
                    <field name="message_unread" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_food_expense_sheet_form" model="ir.ui.view">
            <field name="name">food.expense.sheet.form</field>
            <field name="model">food.expense.sheet</field>
            <field eval="25" name="priority"/>
            <field name="arch" type="xml">
                <form string="Expense Reports" class="o_expense_sheet">
                <field name="can_reset" invisible="1"/>
                 <header>
                    <button name="action_submit_sheet" states="draft" string="Submit to Manager" type="object" class="oe_highlight o_expense_sheet_submit"/>
                    <button name="approve_expense_sheets" states="submit" string="Approve" type="object" groups="hr_expense.group_hr_expense_user" class="oe_highlight o_expense_sheet_approve"/>
                    <button name="action_sheet_move_create" states="approve" string="Post Journal Entries" type="object" groups="account.group_account_manager" class="oe_highlight o_expense_sheet_post"/>
                    <button name="%(marcom_expense_updates.food_expense_sheet_register_payment_wizard_action)d" type="action" string="Register Payment" class="oe_highlight o_expense_sheet_pay" attrs="{'invisible': [('state', '!=', 'post')]}" context="{'default_amount': total_amount, 'partner_id': address_id}" groups="account.group_account_manager"/>
                    <button name="reset_expense_sheets" string="Reset to Draft" type="object" attrs="{'invisible': ['|', ('can_reset', '=', False), ('state', 'not in', ['submit', 'cancel'])]}"/>
                    <button name="%(marcom_expense_updates.food_expense_refuse_wizard_action)d" states="submit,approve" context="{'hr_expense_refuse_model':'food.expense.sheet'}" string="Refuse" type="action" groups="hr_expense.group_hr_expense_user" />
                    <field name="state" widget="statusbar" statusbar_visible="draft,submit,approve,post,done"/>
                </header>
                <sheet>
                    <div class="oe_button_box">
                        <button name="action_get_attachment_view"
                            class="oe_stat_button"
                            icon="fa-book"
                            type="object"
                            attrs="{'invisible': [('attachment_number', '=', 0)]}">
                            <field name="attachment_number" widget="statinfo" string="Documents"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1>
                            <field name="name" placeholder="e.g. Lunch with Customer"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="employee_id" invisible="1"/>
                            <field name="payment_mode"/>
                            <field name="user_id" readonly="1"/>
                            <field name="address_id" invisible="1"/>
                            <field name="department_id" invisible="1"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group>
                    </group>
                     <notebook>
                     <!-- ['|',('state', '=', 'draft'),('project_id', '=', 'project_id')] ('can_project', '=', True)-->
                        <page string="Expense">
                        <field name="expense_line_ids" nolabel="1" widget="many2many" domain="[('state', '=', 'draft'),('project_manager','=',user_id)]" options="{'reload_on_button': True}" context="{'form_view_ref' : 'hr_expense.hr_expense_view_form_without_header', 'expense_adding_line': True}">
                            <tree decoration-danger="is_refused">
                                <field name="date"/>
                                <field name="name"/>
                                <field name="partner_id"/>
                                <field name="project_id"/>
                                <field name="reference"/>
                                <field name="unit_amount"/>
                                <field name="quantity"/>
                                <field name="tax_ids" widget="many2many_tags" />
                                <field name="can_project" invisible="1"/>
                                <field name="state" invisible="1"/>
                                <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                                <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                                <field name="message_unread" invisible="1"/>
                                <field name="attachment_number" string=" "/>
                                <button name="action_get_attachment_view" string="View Attachments" type="object" icon="fa-paperclip"/>
                                <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                                <field name="currency_id" invisible="1"/>
                                <field name="total_amount"/>
                                <field name="company_currency_id" invisible="1"/>
                                <field name="total_amount_company" groups="base.group_multi_currency"/>
                                <field name="is_refused" invisible="True"/>
                           </tree>
                           <form >
                            <group>
                                <field name="date"/>
                                <field name="name"/>
                                <field name="partner_id"/>
                                <field name="project_id"/>
                                <field name="reference"/>
                                <field name="unit_amount"/>
                                <field name="quantity"/>
                                <field name="tax_ids" widget="many2many_tags" />
                                <field name="can_project" invisible="1"/>
                                <field name="state" invisible="1"/>
                                <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                                <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                                </group>
                             <group>
                                <field name="message_unread" invisible="1"/>
                                <field name="attachment_number" string=" "/>
                                <button name="action_get_attachment_view" string="View Attachments" type="object" icon="fa-paperclip"/>
                                <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                                <field name="currency_id" invisible="1"/>
                                <field name="total_amount"/>
                                <field name="company_currency_id" invisible="1"/>
                                <field name="total_amount_company" groups="base.group_multi_currency"/>
                                <field name="is_refused" invisible="True"/>
                             </group>
                          </form>
                        </field>
                        <field name="currency_id" invisible="1"/>
                        <group class="oe_subtotal_footer oe_right" colspan="2" name="expense_total">
                                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                    <label for="total_amount"/>
                                </div>
                                <field name="total_amount" nolabel="1" class="oe_subtotal_footer_separator"/>
                            </group>
                        </page>
                        <page string="Other Info">
                            <group>
                                <group>
                                    <field name="journal_id" domain="[('type', '=', 'purchase')]" options="{'no_open': True, 'no_create': True}" attrs="{'invisible': [('payment_mode', '!=', 'own_account')]}"/>
                                    <field name="bank_journal_id" groups="account.group_account_user" options="{'no_open': True, 'no_create': True}" attrs="{'invisible': [('payment_mode', '!=', 'company_account')]}" domain="[('type', 'in', ['cash', 'bank'])]"/>
                                    <field name="accounting_date" groups="account.group_account_user" attrs="{'invisible': [('state', 'not in', ['approve', 'post', 'done'])]}"/>
                                </group>
                                <group>
                                    <field name="account_move_id" groups="account.group_account_user" attrs="{'invisible': [('state', 'not in', ['post', 'done'])]}" readonly="1"/>
                                </group>
                        </group>
                        </page>
                     </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

<!-- Transportaion Start -->

        <!--Transportaion section  -->


        <record id="transportaion_section_form" model="ir.ui.view">
            <field name="name">transportaion.section.form</field>
            <field name="model">transportaion.expense</field>
            <field name="arch" type="xml">

                <form string="Expenses" class="o_expense_form">
                <header>
                  <button name="action_submit_expenses" string="Submit" type="object" states="wait" class="oe_highlight o_expense_submit" attrs="{'invisible': ['|', ('attachment_number', '&lt;=', 0),'|',('sheet_id', '!=', False), ('is_requester', '=', False)]}"/>
                  <button name="set_to_draft" string="Set To Draft" type="object" class="oe_highlight" attrs="{'invisible': ['|',('state','not in',['refused']),('is_requester', '=', False)]}"/>
                  <button name="action_send_to_approve" string="Send To Approve" type="object" class="oe_highlight" attrs="{'invisible': ['|',('state','not in',['draft']),('is_requester', '=', False)]}"/>
                  <button name="action_department_approval" string="Department Manager Approval" type="object" class="oe_highlight" attrs="{'invisible': ['|',('state','not in',['Department approval']),('is_requester_man', '=', False)]}"/>
                  <!-- <button name="action_department_reject" string="Reject" type="object" class="oe_highlight" attrs="{'invisible': ['|',('state','not in',['Department approval']),('is_requester_man', '=', False)]}"/> -->
                  <button name="action_hr_approval" string="HR Approval" type="object" class="oe_highlight" states="HR Approve" groups="hr.group_hr_manager"/>
                  <!-- <button name="action_hr_reject" string="Reject" type="object" class="oe_highlight" states="HR Approve" groups="hr.group_hr_manager"/> -->
                  <button name="action_co_approval" string="Co-ordinator approval" type="object" class="oe_highlight" states="co-ordinator approve" groups="product_requisition.group_coordinator"/>
                  <!-- <button name="action_co_reject" string="Reject" type="object" class="oe_highlight" states="co-ordinator approve" groups="product_requisition.group_coordinator"/> -->
                  <button name="action_purchase_approval" string="Purchase Approval" type="object" class="oe_highlight" states="Purchase Approval" groups="purchase.group_purchase_manager"/>
                  <!-- <button name="action_purchase_reject" string="Reject" type="object" class="oe_highlight" states="Purchase Approval" groups="purchase.group_purchase_manager"/> -->
                
                  <widget name="attach_document" string="Attach Document" action="message_post" attrs="{'invisible': ['|', ('attachment_number', '&lt;', 1), ('id','=',False)]}"/>
                  <!-- <widget name="attach_document" string="Attach Document" action="message_post" highlight="1" attrs="{'invisible': ['|',('attachment_number', '&gt;=', 1), ('id','=',False)]}"/> -->
                  <!-- <button name="action_submit_expenses" string="Create Report" type="object" class="o_expense_submit" attrs="{'invisible': ['|', ('attachment_number', '&gt;=', 1), ('sheet_id', '!=', False)]}"/> -->
                  <field name="state" widget="statusbar" statusbar_visible="draft,wait,reported,approved,done,refused"/>
                  <button name="action_view_sheet" type="object" string="View Report" class="oe_highlight" attrs="{'invisible': [('sheet_id', '=', False)]}"/>
                </header>
                <sheet>
                    <div class="oe_button_box">
                        <button name="action_get_attachment_view"
                            class="oe_stat_button"
                            icon="fa-book"
                            type="object"
                            attrs="{'invisible': [('attachment_number', '=', 0)]}">
                            <field name="attachment_number" widget="statinfo" string="Documents" options="{'reload_on_button': true}"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1>
                            <field name="name" placeholder="e.g. Transportaion Claims"/>
                        </h1>
                    </div>

                    <group>
                        <group>
                            <field name="product_id" context="{'default_can_be_expensed': 1, 'tree_view_ref': 'hr_expense.product_product_expense_tree_view'}"/>
                            <field name="rates" required="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="labour_charges" required="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="waiting_charges" required="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="total_amounts" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="tax_ids" domain="[('type_tax_use', '=', 'purchase')]" widget="many2many_tags" groups="account.group_account_user"/>
                            <field name="total_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <!-- <label for="quantity"/>
                            <div>
                                <field name="quantity" class="oe_inline"/>
                                <field name="product_uom_id" widget="selection" class="oe_inline" groups="uom.group_uom"/>
                            </div>
                            <field name="tax_ids" domain="[('type_tax_use', '=', 'purchase')]" widget="many2many_tags" groups="account.group_account_user"/> -->
                        </group>
                        <group>
                            <field name="reference"/>
                            <field name="date"/>
                            <!-- <field name="account_id" domain="[('internal_type', '=', 'other')]" groups="account.group_account_user"/> -->
                            <field name="employee_id" invisible="1" groups="hr_expense.group_hr_expense_user"/>
                            <field name="sheet_id" invisible="1"/>
                            <field name="currency_id" groups="base.group_multi_currency"/>
                            <field name="analytic_account_id" invisible="1" groups="analytic.group_analytic_accounting"/>
                            <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                            <field name="type_id" />
                            <field name="vehicle_type_id" />
                            <field name="partner_id"  domain="[('supplier','=',True)]"/>
                            <field name="trip_from" />
                            <field name="trip_to" />
                            <field name="vehicle_no"/>
                            <field name="project_id" groups="hr_expense.group_hr_expense_user"/>
                            <field name="project_manager" invisible="1" />
                            <field name="creator" />
                            <field name="creator_manager" />
                            <field name="is_requester" invisible="1" />
                            <field name="is_requester_man" invisible="1" />
                            <field name="remarks" />
                        </group>
                            <!-- <label for="payment_mode"/>
                            <div>
                                <field name="payment_mode" />
                            </div> -->

                    </group>
                    <label for="department_comment"/>
                    <field name="department_comment" attrs="{'readonly': [('state', 'not in', ['Department approval'])],'required': [('state', 'in', ['Department approval'])]}"/><br/>
                    <label for="hr_comment"/>
                    <field name="hr_comment" attrs="{'readonly': [('state', 'not in', ['HR Approve'])],'required': [('state', 'in', ['HR Approve'])]}"/><br/>
                    <label for="co_comment"/>
                    <field name="co_comment" attrs="{'readonly': [('state', 'not in', ['co-ordinator approve'])],'required': [('state', 'in', ['co-ordinator approve'])]}"/><br/>
                    <label for="purchase_comment"/>
                    <field name="purchase_comment" attrs="{'readonly': [('state', 'not in', ['Purchase Approval'])],'required': [('state', 'in', ['Purchase Approval'])]}"/><br/>


                    <div>
                        <field name="description" class="oe_inline" placeholder="Notes..."/>
                    </div>
                </sheet>
                <div class="o_attachment_preview"/>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>

                    

            </field>
        </record>

        <record id="transportaion_expense_tree" model="ir.ui.view">
            <field name="name">transportaion.expense.tree</field>
            <field name="model">transportaion.expense</field>
            <field name="arch" type="xml">
                <tree string="Expenses" decoration-bf="message_unread == True" class="o_expense_tree">
                    <field name="currency_id" invisible="True"/>
                    <field name="attachment_number" invisible="True"/>
                    <field name="name"/>
                    <field name="product_id"/>
                    <field name="date"/>
                    <field name="reference"/>
                    <field name="partner_id"/>
                    <field name="vehicle_no"/>
                    <field name="project_id"/>
                    <field name="type_id"/>
                    <field name="trip_from"/>
                    <field name="trip_to"/>
                    <field name="vehicle_type_id"/>
                    <field name="rates"/>
                    <field name="labour_charges"/>
                    <field name="waiting_charges"/>
                    <field name="total_amount" sum="Total Amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    <field name="remarks"/>
                    <field name="state"/>

                    <field name="sheet_id" invisible="not context.get('show_report', False)"/>
                    <!-- <field name="payment_mode"/> -->
                    <field name="analytic_account_id" invisible="1" groups="analytic.group_analytic_accounting"/>
                    <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                    <button name="action_get_attachment_view" string="View Attached Documents" type="object" icon="fa-paperclip" attrs="{'invisible': [('attachment_number', '=', 0)]}"/>
                    <field name="message_unread" invisible="1"/>
                    
                    
                    
                </tree>
            </field>
        </record>

        <!--transportaion kanban-->

        <record id="transportaion_expense_kanban_view" model="ir.ui.view">
            <field name="name">transportaion.expense.kanban.view</field>
            <field name="model">transportaion.expense</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="total_amount"/>
                    <field name="date"/>
                    <field name="state"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="row">
                                    <div class="col-12">
                                        <strong class="o_kanban_record_title"><span><t t-esc="record.name.value"/></span></strong>
                                        <strong class="o_kanban_record_subtitle float-right"><span class="text-right"><t t-esc="record.total_amount.value"/></span></strong>
                                    </div>
                                </div>
                                <div class="row mt8">
                                    <div class="col-6 text-muted">
                                        <span><t t-esc="record.employee_id.value"/> <t t-esc="record.date.value"/></span>
                                    </div>
                                    <div class="col-6">
                                        <span class="float-right text-right">
                                            <field name="state" widget="label_selection" options="{'classes': {'draft': 'default', 'reported': 'primary', 'refused': 'danger', 'done': 'warning',
                                            'approved': 'success'}}"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="transportaion_expense_view_pivot" model="ir.ui.view">
            <field name="name">transportaion.expense.view.pivot</field>
            <field name="model">transportaion.expense</field>
            <field name="arch" type="xml">
                <pivot string="Transportaion Expenses Analysis">
                    <!-- <field name="employee_id" type="row"/> -->
                    <field name="date" interval="month" type="col"/>
                    <field name="total_amount" type="measure"/>
                </pivot>
            </field>
        </record>

        <record id="transportaion_expense_view_graph" model="ir.ui.view">
            <field name="name">transportaion.expense.view.graph</field>
            <field name="model">transportaion.expense</field>
            <field name="arch" type="xml">
                <graph string="Transportaion Expenses Analysis">
                    <field name="date" type="col"/>
                    <!-- <field name="employee_id" type="row"/> -->
                    <field name="total_amount" type="measure"/>
                </graph>
            </field>
        </record>

        <!--end transpotation kanban-->
        
        <record id="transportaion_section_menu_action" model="ir.actions.act_window">
            <field name="name">Transportaion Claims</field>
            <field name="res_model">transportaion.expense</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban,graph,pivot</field>
            <field name="domain">[]</field>
        </record>
        <!-- transportaion section -->
        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ sum="Total Amount" -->


         <!-- transportaion section sheet -->
        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

        <record id="view_transportaion_expense_sheet_tree" model="ir.ui.view">
            <field name="name">transportaion.expense.sheet.tree</field>
            <field name="model">transportaion.expense.sheet</field>
            <field name="arch" type="xml">
                <tree string="Expense Reports" decoration-warning="state=='draft'" decoration-bf="message_unread == True" decoration-danger="state=='cancel'">
                    <field name="name" string="Expense Report"/>
                    <field name="employee_id"/>
                    <field name="create_date"/>
                    <field name="accounting_date" groups="account.group_account_manager"/>
                    <field name="total_amount" sum="Total Amount"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state"/>
                    <field name="message_unread" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_transportaion_expense_sheet_form" model="ir.ui.view">
            <field name="name">transportaion.expense.sheet.form</field>
            <field name="model">transportaion.expense.sheet</field>
            <field eval="25" name="priority"/>
            <field name="arch" type="xml">
                <form string="Expense Reports" class="o_expense_sheet">
                <field name="can_reset" invisible="1"/>
                 <header>
                    <button name="action_submit_sheet" states="draft" string="Submit to Manager" type="object" class="oe_highlight o_expense_sheet_submit"/>
                    <button name="approve_expense_sheets" states="submit" string="Approve" type="object" groups="hr_expense.group_hr_expense_user" class="oe_highlight o_expense_sheet_approve"/>
                    <button name="action_sheet_move_create" states="approve" string="Post Journal Entries" type="object" groups="account.group_account_manager" class="oe_highlight o_expense_sheet_post"/>
                    <button name="%(marcom_expense_updates.transportaion_expense_sheet_register_payment_wizard_action)d" type="action" string="Register Payment" class="oe_highlight o_expense_sheet_pay" attrs="{'invisible': [('state', '!=', 'post')]}" context="{'default_amount': total_amount, 'partner_id': address_id}" groups="account.group_account_manager"/>
                    <button name="reset_expense_sheets" string="Reset to Draft" type="object" attrs="{'invisible': ['|', ('can_reset', '=', False), ('state', 'not in', ['submit', 'cancel'])]}"/>
                    <button name="%(marcom_expense_updates.transportaion_expense_refuse_wizard_action)d" states="submit,approve" context="{'hr_expense_refuse_model':'transportaion.expense.sheet'}" string="Refuse" type="action" groups="hr_expense.group_hr_expense_user" />
                    <field name="state" widget="statusbar" statusbar_visible="draft,submit,approve,post,done"/>
                </header>
                <sheet>
                    <div class="oe_button_box">
                        <button name="action_get_attachment_view"
                            class="oe_stat_button"
                            icon="fa-book"
                            type="object"
                            attrs="{'invisible': [('attachment_number', '=', 0)]}">
                            <field name="attachment_number" widget="statinfo" string="Documents"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1>
                            <field name="name" placeholder="e.g. Transportaion Claims"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="employee_id" invisible="1"/>
                            <field name="payment_mode"/>
                            <field name="user_id" readonly="1"/>
                            <field name="address_id" invisible="1"/>
                            <field name="department_id" invisible="1"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group>
                    </group>
                     <notebook>
                        <page string="Expense">
                        <field name="expense_line_ids" nolabel="1" widget="many2many" domain="[('state', '=', 'draft'),('project_manager','=',user_id)]" options="{'reload_on_button': True}" context="{'form_view_ref' : 'hr_expense.hr_expense_view_form_without_header', 'expense_adding_line': True}">
                            <tree decoration-danger="is_refused">
                                <field name="date"/>
                                <field name="name"/>
                                <field name="partner_id" />
                                <field name="project_id"/>
                                <field name="reference"/>
                                <field name="rates"/>
                                <field name="labour_charges"/>
                                <field name="waiting_charges"/>
                                <field name="state" invisible="1"/>
                                <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                                <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                                <field name="message_unread" invisible="1"/>
                                <field name="attachment_number" string=" "/>
                                <button name="action_get_attachment_view" string="View Attachments" type="object" icon="fa-paperclip"/>
                                <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                                <field name="currency_id" invisible="1"/>
                                <field name="total_amount"/>
                                <field name="company_currency_id" invisible="1"/>
                                <field name="total_amount_company" groups="base.group_multi_currency"/>
                                <field name="is_refused" invisible="True"/>
                           </tree>
                           <form >
                            <group>
                               <field name="date"/>
                               <field name="name"/>
                               <field name="partner_id" domain="[('supplier','=',True)]"/>
                               <field name="project_id"/>
                               <field name="reference"/>
                               <field name="rates"/>
                               <field name="labour_charges"/>
                               <field name="waiting_charges"/>
                               <field name="state" invisible="1"/>
                               <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                               <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                             </group>
                             <group>
                               <field name="message_unread" invisible="1"/>
                               <field name="attachment_number" string=" "/>
                               <button name="action_get_attachment_view" string="View Attachments" type="object" icon="fa-paperclip"/>
                               <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                               <field name="currency_id" invisible="1"/>
                               <field name="total_amount"/>
                               <field name="company_currency_id" invisible="1"/>
                               <field name="total_amount_company" groups="base.group_multi_currency"/>
                               <field name="is_refused" invisible="True"/>
                             </group>
                          </form>
                        </field>
                        <field name="currency_id" invisible="1"/>
                        <group class="oe_subtotal_footer oe_right" colspan="2" name="expense_total">
                                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                    <label for="total_amount"/>
                                </div>
                                <field name="total_amount" nolabel="1" class="oe_subtotal_footer_separator"/>
                            </group>
                        </page>
                        <page string="Other Info">
                            <group>
                                <group>
                                    <field name="journal_id" domain="[('type', '=', 'purchase')]" options="{'no_open': True, 'no_create': True}" attrs="{'invisible': [('payment_mode', '!=', 'own_account')]}"/>
                                    <field name="bank_journal_id" groups="account.group_account_user" options="{'no_open': True, 'no_create': True}" attrs="{'invisible': [('payment_mode', '!=', 'company_account')]}" domain="[('type', 'in', ['cash', 'bank'])]"/>
                                    <field name="accounting_date" groups="account.group_account_user" attrs="{'invisible': [('state', 'not in', ['approve', 'post', 'done'])]}"/>
                                </group>
                                <group>
                                    <field name="account_move_id" groups="account.group_account_user" attrs="{'invisible': [('state', 'not in', ['post', 'done'])]}" readonly="1"/>
                                </group>
                        </group>
                        </page>
                     </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>




<!--Start Petty cash section  -->



        <record id="petty_cash_section_form" model="ir.ui.view">
            <field name="name">petty.cash.section.form</field>
            <field name="model">petty.cash.expense</field>
            <field name="arch" type="xml">

                <form string="Expenses" class="o_expense_form">
                <header>
                  <button name="action_submit_expenses" string="Create Report" type="object" class="oe_highlight o_expense_submit" attrs="{'invisible': ['|', ('attachment_number', '&lt;=', 0), ('sheet_id', '!=', False)]}"/>
                  <widget name="attach_document" string="Attach Document" action="message_post" attrs="{'invisible': ['|', ('attachment_number', '&lt;', 1), ('id','=',False)]}"/>
                  <widget name="attach_document" string="Attach Document" action="message_post" highlight="1" attrs="{'invisible': ['|',('attachment_number', '&gt;=', 1), ('id','=',False)]}"/>
                  <button name="action_submit_expenses" string="Create Report" type="object" class="o_expense_submit" attrs="{'invisible': ['|', ('attachment_number', '&gt;=', 1), ('sheet_id', '!=', False)]}"/>
                  <field name="state" widget="statusbar" statusbar_visible="draft,reported,approved,done,refused"/>
                  <button name="action_view_sheet" type="object" string="View Report" class="oe_highlight" attrs="{'invisible': [('sheet_id', '=', False)]}"/>
                </header>
                <sheet>
                    <div class="oe_button_box">
                        <button name="action_get_attachment_view"
                            class="oe_stat_button"
                            icon="fa-book"
                            type="object"
                            attrs="{'invisible': [('attachment_number', '=', 0)]}">
                            <field name="attachment_number" widget="statinfo" string="Documents" options="{'reload_on_button': true}"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1>
                            <field name="name" placeholder="e.g. Petty Cash Claims"/>
                        </h1>
                       
                    </div>

                    <group>
                        <group>
                            <field name="product_id" context="{'default_can_be_expensed': 1, 'tree_view_ref': 'hr_expense.product_product_expense_tree_view'}"/>
                            <field name="unit_amount" required="1" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <!-- <label for="quantity"/>
                            <div>
                                <field name="quantity" class="oe_inline"/>
                                <field name="product_uom_id" widget="selection" class="oe_inline" groups="uom.group_uom"/>
                            </div> -->
                            <field name="tax_ids" domain="[('type_tax_use', '=', 'purchase')]" widget="many2many_tags"/>
                        </group><group>
                            <field name="reference"/>
                            <field name="date"/>
                            <field name="account_id" invisible="1" groups="account.group_account_user"/>
                            <field name="employee_id" domain="[('supplier','=',True)]" groups="hr_expense.group_hr_expense_user"/>
                            <field name="employees_id" invisible="1" groups="hr_expense.group_hr_expense_user"/>
                            <field name="sheet_id" invisible="1"/>
                            <field name="currency_id" groups="base.group_multi_currency"/>
                            <field name="analytic_account_id" invisible="1" groups="analytic.group_analytic_accounting"/>
                            <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group><group>
                            <field name="untaxed_amount" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                            <field name="total_amount" widget='monetary' options="{'currency_field': 'currency_id'}"/>
                            <!-- <label for="payment_mode"/>
                            <div>
                                <field name="payment_mode" />
                            </div> -->
                        </group>
                         <group>
                            <!-- <field name="meal_type" /> -->
                            <field name="project_manager" invisible="1"/>
                            <field name="project_id" groups="hr_expense.group_hr_expense_user"/>
                        </group>

                    </group>
                    <div>
                        <field name="description" class="oe_inline" placeholder="Notes..."/>
                    </div>
                </sheet>
                <div class="o_attachment_preview"/>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

        <record id="petty_cash_expense_tree" model="ir.ui.view">
            <field name="name">petty.cash.expense.tree</field>
            <field name="model">petty.cash.expense</field>
            <field name="arch" type="xml">
                <tree string="Expenses" decoration-bf="message_unread == True" class="o_expense_tree">
                    <field name="currency_id" invisible="True"/>
                    <field name="attachment_number" invisible="True"/>
                    <field name="name"/>
                    <field name="product_id"/>
                    <field name="date"/>
                    <field name="reference"/>
                    <field name="account_id"/>
                    <!-- <field name="partner_id"/> -->
                    <field name="project_id"/>
                    <!-- <field name="meal_type"/> -->
                    <!-- <field name="quantity"/> -->
                    <field name="untaxed_amount" sum="Total Amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    <field name="total_amount" sum="Total Amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    <field name="state"/>
                    <field name="sheet_id" invisible="not context.get('show_report', False)"/>
                    <!-- <field name="payment_mode"/> -->
                    <!-- <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                    <field name="analytic_tag_ids" widget="many2many_tags" groups="analytic.group_analytic_tags"/> -->
                    <button name="action_get_attachment_view" string="View Attached Documents" type="object" icon="fa-paperclip" attrs="{'invisible': [('attachment_number', '=', 0)]}"/>
                    <field name="message_unread" invisible="1"/>
                    
                </tree>
            </field>
        </record>

              <!--Petty Cash kanban-->

        <record id="petty_cash_expense_kanban_view" model="ir.ui.view">
            <field name="name">petty.cash.expense.kanban.view</field>
            <field name="model">petty.cash.expense</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="total_amount"/>
                    <field name="date"/>
                    <field name="state"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="row">
                                    <div class="col-12">
                                        <strong class="o_kanban_record_title"><span><t t-esc="record.name.value"/></span></strong>
                                        <strong class="o_kanban_record_subtitle float-right"><span class="text-right"><t t-esc="record.total_amount.value"/></span></strong>
                                    </div>
                                </div>
                                <div class="row mt8">
                                    <div class="col-6 text-muted">
                                        <span><t t-esc="record.employee_id.value"/> <t t-esc="record.date.value"/></span>
                                    </div>
                                    <div class="col-6">
                                        <span class="float-right text-right">
                                            <field name="state" widget="label_selection" options="{'classes': {'draft': 'default', 'reported': 'primary', 'refused': 'danger', 'done': 'warning',
                                            'approved': 'success'}}"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="petty_cash_expense_view_pivot" model="ir.ui.view">
            <field name="name">petty.cash.expense.view.pivot</field>
            <field name="model">petty.cash.expense</field>
            <field name="arch" type="xml">
                <pivot string="Petty Cash Expenses Analysis">
                    <!-- <field name="employee_id" type="row"/> -->
                    <field name="date" interval="month" type="col"/>
                    <field name="total_amount" type="measure"/>
                </pivot>
            </field>
        </record>

        <record id="petty_cash_view_graph" model="ir.ui.view">
            <field name="name">petty.cash.view.graph</field>
            <field name="model">petty.cash.expense</field>
            <field name="arch" type="xml">
                <graph string="Petty Cash Expenses Analysis">
                    <field name="date" type="col"/>
                    <!-- <field name="employee_id" type="row"/> -->
                    <field name="total_amount" type="measure"/>
                </graph>
            </field>
        </record>

        <!--end Petty Cash kanban-->
        
        
        <record id="petty_cash_section_menu_action" model="ir.actions.act_window">
            <field name="name">Petty Cash Claims</field>
            <field name="res_model">petty.cash.expense</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban,graph,pivot</field>
            <field name="domain">[]</field>
        </record>
        <!-- petty cash section -->
        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ sum="Total Amount" -->


         <!-- petty cash section sheet -->
        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

        <record id="view_petty_cash_expense_sheet_tree" model="ir.ui.view">
            <field name="name">view.petty.cash.expense.sheet.tree</field>
            <field name="model">petty.cash.sheet</field>
            <field name="arch" type="xml">
                <tree string="Expense Reports" decoration-warning="state=='draft'" decoration-bf="message_unread == True" decoration-danger="state=='cancel'">
                    <field name="name" string="Expense Report"/>
                    <field name="employee_id"/>
                    <field name="create_date"/>
                    <field name="accounting_date" groups="account.group_account_manager"/>
                    <field name="total_amount" sum="Total Amount"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state"/>
                    <field name="message_unread" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_petty_cash_expense_sheet_form" model="ir.ui.view">
            <field name="name">view.petty.cash.expense.sheet.form</field>
            <field name="model">petty.cash.sheet</field>
            <field eval="25" name="priority"/>
            <field name="arch" type="xml">
                <form string="Expense Reports" class="o_expense_sheet">
                    <field name="can_reset" invisible="1"/>
                    <header>
                       <button name="action_submit_sheet" states="draft" string="Submit to Manager" type="object" class="oe_highlight o_expense_sheet_submit"/>
                       <button name="approve_expense_sheets" states="submit" string="Approve" type="object" groups="hr_expense.group_hr_expense_user" class="oe_highlight o_expense_sheet_approve"/>
                       <button name="action_sheet_move_create" states="approve" string="Post Journal Entries" type="object" groups="account.group_account_manager" class="oe_highlight o_expense_sheet_post"/>
                       <button name="753" type="action" string="Register Payment" class="oe_highlight o_expense_sheet_pay" attrs="{'invisible': [('state', '!=', 'post')]}" context="{'default_amount': total_amount, 'partner_id': employee_id}" groups="account.group_account_manager"/>
                       <button name="reset_expense_sheets" string="Reset to Draft" type="object" attrs="{'invisible': ['|', ('can_reset', '=', False), ('state', 'not in', ['submit', 'cancel'])]}"/>
                       <button name="749" states="submit,approve" context="{'hr_expense_refuse_model':'petty.cash.sheet'}" string="Refuse" type="action" groups="hr_expense.group_hr_expense_user"/>
                       <field name="state" widget="statusbar" statusbar_visible="draft,submit,approve,post,done"/>
                   </header>
                   <sheet>
                       <div class="oe_button_box">
                           <button name="action_get_attachment_view" class="oe_stat_button" icon="fa-book" type="object" attrs="{'invisible': [('attachment_number', '=', 0)]}">
                               <field name="attachment_number" widget="statinfo" string="Documents"/>
                           </button>
                       </div>
                       <div class="oe_title">
                           <label for="name" class="oe_edit_only"/>
                           <h1>
                               <field name="name" placeholder="e.g. Petty Cash Claims"/>
                           </h1>
                       </div>
                       <group>
                           <group>
                               <field name="employee_id"/>
                               <field name="employees_id" invisible="1"/>
                               <field name="payment_mode"/>
                               <field name="user_id"/>
                               <field name="address_id" invisible="1"/>
                               <field name="department_id" invisible="1"/>
                               <field name="company_id" groups="base.group_multi_company"/>
                           </group>
                       </group>
                        <notebook>
                        <!-- ['|',('state', '=', 'draft'),('project_id', '=', 'project_id')] ('can_project', '=', True)-->
                           <page string="Expense">
                           <field name="expense_line_ids" nolabel="1" widget="many2many" domain="[('state', '=', 'draft'),('project_manager','=',user_id)]" options="{'reload_on_button': True}" context="{'form_view_ref' : 'hr_expense.hr_expense_view_form_without_header', 'expense_adding_line': True}">
                               <tree decoration-danger="is_refused">
                                   <field name="date"/>
                                   <field name="name"/>
                                   <!-- <field name="partner_id"/> -->
                                   <field name="project_id"/>
                                   <field name="reference"/>
                                   <field name="unit_amount"/>
                                   <field name="account_id"/>
                                   <!-- <field name="quantity"/> -->
                                   <field name="tax_ids" widget="many2many_tags" />
                                   <!-- <field name="can_project" invisible="1"/> -->
                                   <field name="state" invisible="1"/>
                                   <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                                   <field name="analytic_tag_ids" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                                   <field name="message_unread" invisible="1"/>
                                   <field name="attachment_number" string=" "/>
                                   <button name="action_get_attachment_view" string="View Attachments" type="object" icon="fa-paperclip"/>
                                   <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                                   <field name="currency_id" invisible="1"/>
                                   <field name="untaxed_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                   <field name="total_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                   <field name="company_currency_id" invisible="1"/>
                                   <field name="total_amount_company" groups="base.group_multi_currency"/>
                                   <field name="is_refused" invisible="True"/>
                              </tree>
                              <form>
                               <group>
                                   <field name="date"/>
                                   <field name="name"/>
                                   <!-- <field name="partner_id"/> -->
                                   <field name="project_id"/>
                                   <field name="reference"/>
                                   <field name="unit_amount"/>
                                   <field name="account_id"/>
                                   <!-- <field name="quantity"/> -->
                                   <field name="tax_ids" widget="many2many_tags" />
                                   <!-- <field name="can_project" invisible="1"/> -->
                                   <field name="state" invisible="1"/>
                                   <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                                   <field name="analytic_tag_ids" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                               </group>
                                <group>
                                   <field name="message_unread" invisible="1"/>
                                   <field name="attachment_number" string=" "/>
                                   <button name="action_get_attachment_view" string="View Attachments" type="object" icon="fa-paperclip"/>
                                   <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                                   <field name="currency_id" invisible="1"/>
                                   <field name="untaxed_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                   <field name="total_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                   <field name="company_currency_id" invisible="1"/>
                                   <field name="total_amount_company" groups="base.group_multi_currency"/>
                                   <field name="is_refused" invisible="True"/>
                                </group>
                             </form>
                           </field>
                           <field name="currency_id" invisible="1"/>
                           <group class="oe_subtotal_footer oe_right" colspan="2" name="expense_total">
                                   <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                       <label for="total_amount"/>
                                   </div>
                                   <field name="total_amount" nolabel="1" class="oe_subtotal_footer_separator"/>
                               </group>
                           </page>
                           <page string="Other Info">
                               <group>
                                   <group>
                                       <field name="journal_id"  options="{'no_open': True, 'no_create': True}" attrs="{'invisible': [('payment_mode', '!=', 'own_account')]}"/>
                                       <field name="bank_journal_id" groups="account.group_account_user" options="{'no_open': True, 'no_create': True}" attrs="{'invisible': [('payment_mode', '!=', 'company_account')]}" domain="[('type', 'in', ['cash', 'bank'])]"/>
                                       <field name="accounting_date" groups="account.group_account_user" attrs="{'invisible': [('state', 'not in', ['approve', 'post', 'done'])]}"/>
                                   </group>
                                   <group>
                                       <field name="account_move_id" groups="account.group_account_user" attrs="{'invisible': [('state', 'not in', ['post', 'done'])]}" readonly="1"/>
                                   </group>
                           </group>
                           </page>
                        </notebook>
                   </sheet>
                   <div class="oe_chatter">
                       <field name="message_follower_ids" widget="mail_followers"/>
                       <field name="activity_ids" widget="mail_activity"/>
                       <field name="message_ids" widget="mail_thread"/>
                   </div>
                </form>
            </field>
        </record>

    <!--End Petty cash section  -->



<!--Start Labour section  -->



        <record id="labour_section_form" model="ir.ui.view">
            <field name="name">labour.section.form</field>
            <field name="model">labour.expense</field>
            <field name="arch" type="xml">

                <form string="Expenses" class="o_expense_form">
                <header>
                  <button name="action_submit_expenses" string="Create Report" type="object" class="oe_highlight o_expense_submit" attrs="{'invisible': ['|', ('attachment_number', '&lt;=', 0), ('sheet_id', '!=', False)]}"/>
                  <widget name="attach_document" string="Attach Document" action="message_post" attrs="{'invisible': ['|', ('attachment_number', '&lt;', 1), ('id','=',False)]}"/>
                  <widget name="attach_document" string="Attach Document" action="message_post" highlight="1" attrs="{'invisible': ['|',('attachment_number', '&gt;=', 1), ('id','=',False)]}"/>
                  <button name="action_submit_expenses" string="Create Report" type="object" class="o_expense_submit" attrs="{'invisible': ['|', ('attachment_number', '&gt;=', 1), ('sheet_id', '!=', False)]}"/>
                  <field name="state" widget="statusbar" statusbar_visible="draft,reported,approved,done,refused"/>
                  <button name="action_view_sheet" type="object" string="View Report" class="oe_highlight" attrs="{'invisible': [('sheet_id', '=', False)]}"/>
                </header>
                <sheet>
                    <div class="oe_button_box">
                        <button name="action_get_attachment_view"
                            class="oe_stat_button"
                            icon="fa-book"
                            type="object"
                            attrs="{'invisible': [('attachment_number', '=', 0)]}">
                            <field name="attachment_number" widget="statinfo" string="Documents" options="{'reload_on_button': true}"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name"/>
                        <h1>
                            <field name="name" placeholder="e.g. Labour Claims"/>
                        </h1>
                       
                    </div>

                    <group>
                        <group>
                            <field name="product_id" />
                            <field name="partner_id" domain="[('supplier','=',True)]"/>
                            <field name="no_of_helpers"/>
                            <field name="labour_type" />
                            <field name="time_in" widget="float_time" />
                            <field name="time_out" widget="float_time" />
                            <field name="total_hours" widget="float_time"/>
                            <field name="break_hour" widget="float_time"/>
                            <field name="travelling_hours" widget="float_time"/>
                            <field name="net_hours" widget="float_time"/>
                            <field name="rate_per_hour" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="total_amounts" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <field name="tax_ids" domain="[('type_tax_use', '=', 'purchase')]" widget="many2many_tags" groups="account.group_account_user"/>
                            <field name="total_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            <!-- <field name="product_id" context="{'default_can_be_expensed': 1, 'tree_view_ref': 'hr_expense.product_product_expense_tree_view'}"/> -->
                            <!-- <field name="unit_amount" required="1" widget="monetary" options="{'currency_field': 'currency_id'}"/> -->
                            <!-- <label for="quantity"/>
                            <div>
                                <field name="quantity" class="oe_inline"/>
                                <field name="product_uom_id" widget="selection" class="oe_inline" groups="uom.group_uom"/>
                            </div> -->
                            <!-- <field name="tax_ids" domain="[('type_tax_use', '=', 'purchase')]" widget="many2many_tags" groups="account.group_account_user"/> -->
                        </group><group>
                            <field name="reference"/>
                            <field name="date"/>
                            <!-- <field name="account_id" domain="[('internal_type', '=', 'other')]" groups="account.group_account_user"/> -->
                            <!-- <field name="employee_id" groups="hr_expense.group_hr_expense_user"/> -->
                            <field name="project_id" groups="hr_expense.group_hr_expense_user"/>
                            <field name="project_manager" invisible="1"/>
                            <field name="sheet_id" invisible="1"/>
                            <field name="currency_id" groups="base.group_multi_currency"/>
                            <field name="analytic_account_id" invisible="1" groups="analytic.group_analytic_accounting"/>
                            <field name="analytic_tag_ids" invisible="1" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group><group>
                            <!-- <field name="untaxed_amount" widget='monetary' options="{'currency_field': 'currency_id'}"/> -->
                            <!-- <field name="total_amount" widget='monetary' options="{'currency_field': 'currency_id'}"/> -->
                            <!-- <label for="payment_mode"/>
                            <div>
                                <field name="payment_mode" />
                            </div> -->
                        </group>
                        
                    </group>
                    <div>
                        <field name="description" class="oe_inline" placeholder="Notes..."/>
                    </div>
                </sheet>
                <div class="o_attachment_preview"/>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

        <record id="labour_expense_tree" model="ir.ui.view">
            <field name="name">labour.expense.tree</field>
            <field name="model">labour.expense</field>
            <field name="arch" type="xml">
                <tree string="Expenses" decoration-bf="message_unread == True" class="o_expense_tree">
                    <field name="currency_id" invisible="True"/>
                    <field name="attachment_number" invisible="True"/>
                    <field name="name"/>
                    <!-- <field name="product_id"/> -->
                    <field name="date"/>
                    <field name="reference"/>
                    <field name="partner_id"/>
                    <field name="no_of_helpers"/>
                    <field name="labour_type"/>
                    <field name="time_in" widget="float_time"/>
                    <field name="time_out" widget="float_time"/>
                    <field name="total_hours" widget="float_time"/>
                    <field name="break_hour" widget="float_time"/>
                    <field name="travelling_hours" widget="float_time"/>
                    <field name="net_hours" widget="float_time"/>
                    <field name="rate_per_hour"  widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    <field name="total_amount"  sum="Total Amount" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                    <field name="project_id"/>
                    <field name="state"/>
                    <field name="sheet_id" invisible="not context.get('show_report', False)"/>
                    <!-- <field name="payment_mode"/> -->
                    <!-- <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                    <field name="analytic_tag_ids" widget="many2many_tags" groups="analytic.group_analytic_tags"/> -->
                    <button name="action_get_attachment_view" string="View Attached Documents" type="object" icon="fa-paperclip" attrs="{'invisible': [('attachment_number', '=', 0)]}"/>
                    <field name="message_unread" invisible="1"/>
                </tree>
            </field>
        </record>

        
        <!--Petty Cash kanban-->

        <record id="labour_expense_kanban_view" model="ir.ui.view">
            <field name="name">labour.expense.kanban.view</field>
            <field name="model">labour.expense</field>
            <field name="arch" type="xml">
                <kanban class="o_kanban_mobile">
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="total_amount"/>
                    <field name="date"/>
                    <field name="state"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_card oe_kanban_global_click">
                                <div class="row">
                                    <div class="col-12">
                                        <strong class="o_kanban_record_title"><span><t t-esc="record.name.value"/></span></strong>
                                        <strong class="o_kanban_record_subtitle float-right"><span class="text-right"><t t-esc="record.total_amount.value"/></span></strong>
                                    </div>
                                </div>
                                <div class="row mt8">
                                    <div class="col-6 text-muted">
                                        <span><t t-esc="record.employee_id.value"/> <t t-esc="record.date.value"/></span>
                                    </div>
                                    <div class="col-6">
                                        <span class="float-right text-right">
                                            <field name="state" widget="label_selection" options="{'classes': {'draft': 'default', 'reported': 'primary', 'refused': 'danger', 'done': 'warning',
                                            'approved': 'success'}}"/>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="labour_expense_view_pivot" model="ir.ui.view">
            <field name="name">labour.expense.view.pivot</field>
            <field name="model">labour.expense</field>
            <field name="arch" type="xml">
                <pivot string="Labour Expenses Analysis">
                    <!-- <field name="employee_id" type="row"/> -->
                    <field name="date" interval="month" type="col"/>
                    <field name="total_amount" type="measure"/>
                </pivot>
            </field>
        </record>

        <record id="labour_view_graph" model="ir.ui.view">
            <field name="name">labour.view.graph</field>
            <field name="model">labour.expense</field>
            <field name="arch" type="xml">
                <graph string="Labour Expenses Analysis">
                    <field name="date" type="col"/>
                    <!-- <field name="employee_id" type="row"/> -->
                    <field name="total_amount" type="measure"/>
                </graph>
            </field>
        </record>

        <!--end Petty Cash kanban-->
        
        <record id="labour_section_menu_action" model="ir.actions.act_window">
            <field name="name">Labour Claims</field>
            <field name="res_model">labour.expense</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,kanban,graph,pivot</field>
            <field name="domain">[]</field>
        </record>
        <!-- Labour section -->
        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ sum="Total Amount" -->


        <!-- Labour section sheet -->
        <!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->

        <record id="view_labour_expense_sheet_tree" model="ir.ui.view">
            <field name="name">view.labour.expense.sheet.tree</field>
            <field name="model">labour.sheet</field>
            <field name="arch" type="xml">
                <tree string="Expense Reports" decoration-warning="state=='draft'" decoration-bf="message_unread == True" decoration-danger="state=='cancel'">
                    <field name="name" string="Expense Report"/>
                    <field name="employee_id"/>
                    <field name="create_date"/>
                    <field name="accounting_date" groups="account.group_account_manager"/>
                    <field name="total_amount" sum="Total Amount"/>
                    <field name="currency_id" invisible="1"/>
                    <field name="state"/>
                    <field name="message_unread" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_labour_expense_sheet_form" model="ir.ui.view">
            <field name="name">view.labour.expense.sheet.form</field>
            <field name="model">labour.sheet</field>
            <field eval="25" name="priority"/>
            <field name="arch" type="xml">
                <form string="Expense Reports" class="o_expense_sheet">
                <field name="can_reset" invisible="1"/>
                 <header>
                    <button name="action_submit_sheet" states="draft" string="Submit to Manager" type="object" class="oe_highlight o_expense_sheet_submit"/>
                    <button name="approve_expense_sheets" states="submit" string="Approve" type="object" groups="hr_expense.group_hr_expense_user" class="oe_highlight o_expense_sheet_approve"/>
                    <button name="action_sheet_move_create" states="approve" string="Post Journal Entries" type="object" groups="account.group_account_manager" class="oe_highlight o_expense_sheet_post"/>
                    <button name="%(marcom_expense_updates.labour_expense_sheet_register_payment_wizard_action)d" type="action" string="Register Payment" class="oe_highlight o_expense_sheet_pay" attrs="{'invisible': [('state', '!=', 'post')]}" context="{'default_amount': total_amount, 'partner_id': address_id}" groups="account.group_account_manager"/>
                    <button name="reset_expense_sheets" string="Reset to Draft" type="object" attrs="{'invisible': ['|', ('can_reset', '=', False), ('state', 'not in', ['submit', 'cancel'])]}"/>
                    <button name="%(marcom_expense_updates.labour_expense_refuse_wizard_action)d" states="submit,approve" context="{'hr_expense_refuse_model':'labour.sheet'}" string="Refuse" type="action" groups="hr_expense.group_hr_expense_user" />
                    <field name="state" widget="statusbar" statusbar_visible="draft,submit,approve,post,done"/>
                </header>
                <sheet>
                    <div class="oe_button_box">
                        <button name="action_get_attachment_view"
                            class="oe_stat_button"
                            icon="fa-book"
                            type="object"
                            attrs="{'invisible': [('attachment_number', '=', 0)]}">
                            <field name="attachment_number" widget="statinfo" string="Documents"/>
                        </button>
                    </div>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only"/>
                        <h1>
                            <field name="name" placeholder="e.g. Labour Claims"/>
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="employee_id"/>
                            <field name="payment_mode"/>
                            <field name="user_id"/>
                            <field name="address_id" invisible="1"/>
                            <field name="department_id" invisible="1"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                        </group>
                    </group>
                     <notebook>
                     <!-- ['|',('state', '=', 'draft'),('project_id', '=', 'project_id')] ('can_project', '=', True)-->
                        <page string="Expense">
                        <field name="expense_line_ids" nolabel="1" widget="many2many" domain="[('state', '=', 'draft'),('project_manager','=',user_id)]" options="{'reload_on_button': True}" context="{'form_view_ref' : 'hr_expense.hr_expense_view_form_without_header', 'expense_adding_line': True}">
                            <tree decoration-danger="is_refused">
                                <field name="date"/>
                                <field name="name"/>
                                <!-- <field name="partner_id"/> -->
                                <field name="project_id"/>
                                <field name="reference"/>
                                <field name="partner_id" domain="[('supplier','=',True)]"/>
                                <field name="no_of_helpers"/>
                                <field name="time_in" widget="float_time"/>
                                <field name="time_out" widget="float_time"/>
                                <field name="break_hour" widget="float_time"/>
                                <field name="travelling_hours" widget="float_time"/>
                                <field name="net_hours" widget="float_time"/>
                                <field name="rate_per_hour" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                <field name="total_hours" widget="float_time"/>
                                <!-- <field name="unit_amount"/> -->
                                <!-- <field name="quantity"/> -->
                                <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                                <!-- <field name="can_project" invisible="1"/> -->
                                <field name="state" invisible="1"/>
                                <!-- <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/> -->
                                <!-- <field name="analytic_tag_ids" widget="many2many_tags" groups="analytic.group_analytic_tags"/> -->
                                <field name="message_unread" invisible="1"/>
                                <field name="attachment_number" string=" "/>
                                <button name="action_get_attachment_view" string="View Attachments" type="object" icon="fa-paperclip"/>
                                <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                                <field name="currency_id" invisible="1"/>
                                <!-- <field name="untaxed_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/> -->
                                <!-- <field name="total_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/> -->
                                <field name="company_currency_id" invisible="1"/>
                                <field name="total_amount_company" groups="base.group_multi_currency"/>
                                <field name="is_refused" invisible="True"/>
                           </tree>
                           <form >
                            <group>
                                <field name="date"/>
                                <field name="name"/>
                                <!-- <field name="partner_id"/> -->
                                <field name="project_id"/>
                                <field name="reference"/>
                                <!-- <field name="unit_amount"/> -->
                                <!-- <field name="quantity"/> -->
                                <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                                <!-- <field name="can_project" invisible="1"/> -->
                                <field name="state" invisible="1"/>
                                <field name="analytic_account_id" groups="analytic.group_analytic_accounting"/>
                                <field name="analytic_tag_ids" widget="many2many_tags" groups="analytic.group_analytic_tags"/>
                            </group>
                             <group>
                                <field name="message_unread" invisible="1"/>
                                <field name="attachment_number" string=" "/>
                                <button name="action_get_attachment_view" string="View Attachments" type="object" icon="fa-paperclip"/>
                                <!-- <field name="tax_ids" widget="many2many_tags" groups="account.group_account_user"/> -->
                                <field name="currency_id" invisible="1"/>
                                <!-- <field name="untaxed_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/> -->
                                <!-- <field name="total_amount" widget="monetary" options="{'currency_field': 'currency_id'}"/> -->
                                <field name="company_currency_id" invisible="1"/>
                                <field name="total_amount_company" groups="base.group_multi_currency"/>
                                <field name="is_refused" invisible="True"/>
                             </group>
                          </form>
                        </field>
                        <field name="currency_id" invisible="1"/>
                        <group class="oe_subtotal_footer oe_right" colspan="2" name="expense_total">
                                <div class="oe_subtotal_footer_separator oe_inline o_td_label">
                                    <label for="total_amount"/>
                                </div>
                                <field name="total_amount" nolabel="1" class="oe_subtotal_footer_separator"/>
                            </group>
                        </page>
                        <page string="Other Info">
                            <group>
                                <group>
                                    <field name="journal_id" domain="[('type', '=', 'purchase')]" options="{'no_open': True, 'no_create': True}" attrs="{'invisible': [('payment_mode', '!=', 'own_account')]}"/>
                                    <field name="bank_journal_id" groups="account.group_account_user" options="{'no_open': True, 'no_create': True}" attrs="{'invisible': [('payment_mode', '!=', 'company_account')]}" domain="[('type', 'in', ['cash', 'bank'])]"/>
                                    <field name="accounting_date" groups="account.group_account_user" attrs="{'invisible': [('state', 'not in', ['approve', 'post', 'done'])]}"/>
                                </group>
                                <group>
                                    <field name="account_move_id" groups="account.group_account_user" attrs="{'invisible': [('state', 'not in', ['post', 'done'])]}" readonly="1"/>
                                </group>
                        </group>
                        </page>
                     </notebook>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers"/>
                    <field name="activity_ids" widget="mail_activity"/>
                    <field name="message_ids" widget="mail_thread"/>
                </div>
                </form>
            </field>
        </record>

    <!--End Labour section  --> 


        <menuitem 
            id="petty_cashe_expense_report" 
            name="Petty Cashe Report" 
            parent="hr_expense.menu_hr_expense_root"
            action="petty_cash_wizard" />




        <menuitem
            id="labour_section_menu"
            name="Labour Expense"
            parent="hr_expense.menu_hr_expense_my_expenses"
            sequence="12"
            action="labour_section_menu_action"/>


        <menuitem
            id="petty_cash_section_menu"
            name="Petty cash Expense"
            parent="hr_expense.menu_hr_expense_my_expenses"
            sequence="12"
            action="petty_cash_section_menu_action"/>


        <menuitem
                id="transportaion_section_menu"
                name="Transportaion Expense"
                parent="hr_expense.menu_hr_expense_my_expenses"
                sequence="11"
                action="transportaion_section_menu_action"/>

        <menuitem
                id="food_section_menu"
                name="Food Expense"
                parent="hr_expense.menu_hr_expense_my_expenses"
                sequence="10"
                action="food_section_menu_action2"/>


    </data> 
</odoo>
